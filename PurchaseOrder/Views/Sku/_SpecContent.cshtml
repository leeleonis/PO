@model SKU
@{
    string LangID = ViewData["LangID"].ToString();
    string DefaultLangID = EnumData.DataLangList().First().Key;
    var AttributeTypeList = (List<SkuAttributeType>)ViewData["AttributeTypeList"];
}

<table border="0" cellpadding="8" cellspacing="0" style="border-width: 0px;" width="679">
    <tbody>
        <tr>
            <td align="left" width="187">
                <p style="margin: 3px;"><b><font color="#333333" face="Verdana" style="font-size: 9pt;">Specs:</font></b></p>
            </td>
            <td align="left" width="460">
                <p style="margin: 3px;"><font color="#333333" face="Verdana" style="font-size: 9pt;"><strong>@(Model.SkuLang.First(l => l.LangID.Equals(Model.SkuLang.Any(ll => ll.LangID.Equals(LangID)) ? LangID : DefaultLangID)).Name)</strong></font></p>
            </td>
        </tr>
        @{
            Dictionary<int, int[]> attributeGroup = JsonConvert.DeserializeObject<Dictionary<int, int[]>>(Model.SkuType.AttributeGroup);
            foreach (var typeID in attributeGroup.Keys.Except(new int[] { 0 }))
            {
                var type = AttributeTypeList.First(t => t.ID.Equals(typeID));
                if (attributeGroup[type.ID].Any() && Model.Sku_Attribute.Any(s => attributeGroup[type.ID].Contains(s.AttrID) && s.LangID.Equals(LangID) && s.Html))
                {
                    <tr>
                        <td align="left" bgcolor="#cccccc" colspan="2">
                            <p style="margin: 3px;"><b><font color="#333333" face="Verdana" style="font-size: 9pt;">@type.Name</font></b></p>
                        </td>
                    </tr>
                    foreach (var attrID in attributeGroup[type.ID].Except(new int[] { 0 }))
                    {
                        var attribute = type.SkuAttribute.First(a => a.ID.Equals(attrID));
                        Sku_Attribute value = Model.Sku_Attribute.FirstOrDefault(s => s.AttrID.Equals(attribute.ID) && s.LangID.Equals(LangID) && s.Html);
                        if (value != null && !string.IsNullOrEmpty(value.Value))
                        {
                            <tr>
                                <td align="left" width="187">
                                    <p style="margin: 3px;"><font color="#333333" face="Verdana" style="font-size: 9pt;">@(attribute.SkuAttributeLang.FirstOrDefault(l => l.LangID.Equals(attribute.SkuAttributeLang.Any(ll => ll.LangID.Equals(LangID)) ? LangID : DefaultLangID))?.Name)</font></p>
                                </td>
                                <td align="left" width="460">
                                    <p style="margin: 3px;">
                                        <font color="#333333" face="Verdana" style="font-size: 9pt;">
                                            @switch (attribute.Property)
                                            {
                                                case 1:
                                                    @Enum.GetName(typeof(EnumData.YesNo), int.Parse(value.Value))
                                                    break;
                                                case 2:
                                                    string[] dimensions = value.Value?.Split('x') ?? new string[] { };
                                                    @(string.Format("{0} mm", string.Join(" x ", dimensions)))
                                                    break;
                                                case 3:
                                                    string[] resolution = value.Value?.Split('x') ?? new string[] { };
                                                    @(string.Format("{0} pixels", string.Join(" x ", resolution)))
                                                    break;
                                                default:
                                                    @(value.Value ?? "")
                                                    break;
                                            }
                                        </font>
                                    </p>
                                </td>
                            </tr>
                        }
                    }
                }
            }
        }
        <tr>
            <td align="left" bgcolor="#cccccc" colspan="2">
                <p style="margin: 3px;"><span style="font-weight: 700;"><font color="#333333" face="Verdana" style="font-size: 9pt;">Disclaimer: Specifications does not reflect the actual package content and are subject to change by the manufacturer without prior notification.</font></span></p>
            </td>
        </tr>
    </tbody>
</table>
